function M_ = M(q,time,param)

a1 = q( 1 ); 
a2 = q( 2 ); 
a3 = q( 3 ); 
a4 = q( 4 ); 
a5 = q( 5 ); 
a6 = q( 6 ); 

t= time ;

g = param( 1 ); 
d3 = param( 2 ); 
r3 = param( 3 ); 
d4 = param( 4 ); 
r4 = param( 5 ); 
m1 = param( 6 ); 
mx1 = param( 7 ); 
my1 = param( 8 ); 
mz1 = param( 9 ); 
Ixx1 = param( 10 ); 
Ixy1 = param( 11 ); 
Ixz1 = param( 12 ); 
Iyy1 = param( 13 ); 
Iyz1 = param( 14 ); 
Izz1 = param( 15 ); 
m2 = param( 16 ); 
mx2 = param( 17 ); 
my2 = param( 18 ); 
mz2 = param( 19 ); 
Ixx2 = param( 20 ); 
Ixy2 = param( 21 ); 
Ixz2 = param( 22 ); 
Iyy2 = param( 23 ); 
Iyz2 = param( 24 ); 
Izz2 = param( 25 ); 
m3 = param( 26 ); 
mx3 = param( 27 ); 
my3 = param( 28 ); 
mz3 = param( 29 ); 
Ixx3 = param( 30 ); 
Ixy3 = param( 31 ); 
Ixz3 = param( 32 ); 
Iyy3 = param( 33 ); 
Iyz3 = param( 34 ); 
Izz3 = param( 35 ); 
m4 = param( 36 ); 
mx4 = param( 37 ); 
my4 = param( 38 ); 
mz4 = param( 39 ); 
Ixx4 = param( 40 ); 
Ixy4 = param( 41 ); 
Ixz4 = param( 42 ); 
Iyy4 = param( 43 ); 
Iyz4 = param( 44 ); 
Izz4 = param( 45 ); 
m5 = param( 46 ); 
mx5 = param( 47 ); 
my5 = param( 48 ); 
mz5 = param( 49 ); 
Ixx5 = param( 50 ); 
Ixy5 = param( 51 ); 
Ixz5 = param( 52 ); 
Iyy5 = param( 53 ); 
Iyz5 = param( 54 ); 
Izz5 = param( 55 ); 
m6 = param( 56 ); 
mx6 = param( 57 ); 
my6 = param( 58 ); 
mz6 = param( 59 ); 
Ixx6 = param( 60 ); 
Ixy6 = param( 61 ); 
Ixz6 = param( 62 ); 
Iyy6 = param( 63 ); 
Iyz6 = param( 64 ); 
Izz6 = param( 65 ); 
Ma1 = param( 66 ); 
Ma2 = param( 67 ); 
Ma3 = param( 68 ); 
Ma4 = param( 69 ); 
Ma5 = param( 70 ); 
Ma6 = param( 71 ); 
FS001 = param( 72 ); 
FSa11 = param( 73 ); 
FSb11 = param( 74 ); 
FSa21 = param( 75 ); 
FSb21 = param( 76 ); 
FSa31 = param( 77 ); 
FSb31 = param( 78 ); 
FSa41 = param( 79 ); 
FSb41 = param( 80 ); 
FS002 = param( 81 ); 
FSa12 = param( 82 ); 
FSb12 = param( 83 ); 
FSa22 = param( 84 ); 
FSb22 = param( 85 ); 
FSa32 = param( 86 ); 
FSb32 = param( 87 ); 
FSa42 = param( 88 ); 
FSb42 = param( 89 ); 
FS003 = param( 90 ); 
FSa13 = param( 91 ); 
FSb13 = param( 92 ); 
FSa23 = param( 93 ); 
FSb23 = param( 94 ); 
FSa33 = param( 95 ); 
FSb33 = param( 96 ); 
FSa43 = param( 97 ); 
FSb43 = param( 98 ); 
FS004 = param( 99 ); 
FSa14 = param( 100 ); 
FSb14 = param( 101 ); 
FSa24 = param( 102 ); 
FSb24 = param( 103 ); 
FSa34 = param( 104 ); 
FSb34 = param( 105 ); 
FSa44 = param( 106 ); 
FSb44 = param( 107 ); 
FS005 = param( 108 ); 
FSa15 = param( 109 ); 
FSb15 = param( 110 ); 
FSa25 = param( 111 ); 
FSb25 = param( 112 ); 
FSa35 = param( 113 ); 
FSb35 = param( 114 ); 
FSa45 = param( 115 ); 
FSb45 = param( 116 ); 
FS006 = param( 117 ); 
FSa16 = param( 118 ); 
FSb16 = param( 119 ); 
FSa26 = param( 120 ); 
FSb26 = param( 121 ); 
FSa36 = param( 122 ); 
FSb36 = param( 123 ); 
FSa46 = param( 124 ); 
FSb46 = param( 125 ); 
g = param( 126 ); 

atom57 = a3+a2;
atom58 = cos(atom57);
atom114 = cos(a5);
atom59 = sin(atom57);
atom80 = cos(a4);
atom115 = sin(a5);
atom94 = -atom59*atom80;
atom152 = cos(a6);
atom81 = sin(a4);
atom847 = atom81*atom114;
atom153 = sin(a6);
atom36 = sin(a2);
atom35 = cos(a2);
atom2582 = -atom35*atom59+atom58*atom36;
atom2589 = -atom2582*d3;
atom2832 = -atom2589-r4;
atom2579 = atom59*atom36+atom58*atom35;
atom2590 = atom2579*d3;
atom2831 = d4+atom2590;
atom1447 = -atom847*atom153+atom152*atom80;
atom2857 = -atom59*atom2832+atom58*atom2831;
atom1049 = atom114*atom80;
atom1723 = -atom81*atom152-atom153*atom1049;
atom2853 = -atom58*r3;
atom2854 = r3*atom59;
atom3688 = atom115*atom153;
atom3698 = atom1447*atom2857-atom2854*atom3688+atom1723*atom2853;
atom3687 = -atom115*atom152;
atom1729 = atom152*atom1049-atom81*atom153;
atom1444 = atom152*atom847+atom153*atom80;
atom3693 = -atom2854*atom3687+atom2857*atom1444+atom2853*atom1729;
atom133 = -atom115*atom94-atom58*atom114;
atom3719 = atom3698*mx6-my6*atom3693;
atom848 = -atom81*atom115;
atom1060 = -atom115*atom80;
atom3249 = atom848*atom2857+atom114*atom2854+atom2853*atom1060;
atom95 = atom81*atom59;
atom130 = atom114*atom94-atom58*atom115;
atom3716 = atom3249*mx6+mz6*atom3693;
atom171 = atom95*atom152-atom130*atom153;
atom168 = atom130*atom152+atom95*atom153;
atom3713 = -mz6*atom3698-my6*atom3249;
atom883 = Ixz5*atom95+atom130*Ixx5+atom133*Ixy5;
atom888 = atom95*Iyz5+atom133*Iyy5+atom130*Ixy5;
atom893 = Izz5*atom95+atom133*Iyz5+atom130*Ixz5;
atom2929 = atom2853^2+atom2854^2+atom2857^2;
atom521 = atom95*Ixy4+atom58*Ixz4+atom94*Ixx4;
atom526 = atom95*Iyy4+atom94*Ixy4+atom58*Iyz4;
atom531 = Ixz4*atom94+atom95*Iyz4+atom58*Izz4;
atom2860 = atom81*atom2857+atom2853*atom80;
atom2863 = -atom81*atom2853+atom2857*atom80;
atom2876 = -atom2860*my4+mx4*atom2863;
atom2870 = -mz4*atom2863-atom2854*my4;
atom2873 = mz4*atom2860+atom2854*mx4;
atom299 = atom35*d3;
atom2576 = r3*atom36;
atom2575 = -atom35*r3;
atom2585 = atom2579*atom2575-atom2582*atom2576;
atom2588 = atom2579*atom2576+atom2582*atom2575;
atom3244 = atom2857*atom847+atom115*atom2854+atom2853*atom1049;
atom3270 = atom3249*mx5-atom3244*my5;
atom3267 = -mx5*atom2863+mz5*atom3244;
atom3264 = -mz5*atom3249+atom2863*my5;
atom1492 = -atom133*Izz6+atom168*Ixz6+atom171*Iyz6;
atom1487 = atom168*Ixy6+Iyy6*atom171-atom133*Iyz6;
atom1482 = -atom133*Ixz6+atom168*Ixx6+atom171*Ixy6;
atom3701 = -atom2832*atom1729-atom3687*atom2831;
atom3704 = -atom1723*atom2832-atom3688*atom2831;
atom3728 = mx6*atom3704-my6*atom3701;
atom3255 = atom114*atom2831-atom2832*atom1060;
atom3722 = -mz6*atom3704-my6*atom3255;
atom3725 = atom3255*mx6+mz6*atom3701;
atom3747 = -atom848*atom3719+atom1444*atom3713+atom1447*atom3716;
atom2865 = atom81*atom2832;
atom3252 = atom115*atom2831-atom2832*atom1049;
atom3276 = mz5*atom3252-atom2865*mx5;
atom3273 = atom2865*my5-mz5*atom3255;
atom3279 = atom3255*mx5-atom3252*my5;
atom3298 = atom848*atom3267+atom847*atom3264+atom3270*atom80;
atom2932 = atom2854*atom2831-atom2853*atom2832;
atom2599 = -atom2585*my3+mx3*atom2588;
atom343 = -Ixz3*atom59-atom58*Iyz3;
atom2864 = -atom2832*atom80;
atom2885 = -atom2864*my4+atom2865*mx4;
atom2882 = mx4*atom2831+mz4*atom2864;
atom2879 = -atom2865*mz4-my4*atom2831;
atom2902 = atom2873*atom80+atom81*atom2870;
atom565 = atom81*atom521+atom526*atom80;
atom933 = atom848*atom888+atom883*atom847+atom893*atom80;
atom1532 = atom1447*atom1487+atom1444*atom1482-atom848*atom1492;
atom2867 = -atom81*r4;
atom3258 = atom115*d4+r4*atom1049;
atom3285 = mz5*atom3258-atom2867*mx5;
atom3261 = atom1060*r4+atom114*d4;
atom3282 = atom2867*my5-mz5*atom3261;
atom3288 = -atom3258*my5+mx5*atom3261;
atom2888 = -d4*my4-atom2867*mz4;
atom2866 = r4*atom80;
atom2891 = mz4*atom2866+d4*mx4;
atom2894 = atom2867*mx4-atom2866*my4;
atom2935 = atom2853*r4+atom2854*d4;
atom3710 = -atom3688*d4+atom1723*r4;
atom3707 = -d4*atom3687+r4*atom1729;
atom3737 = -my6*atom3707+mx6*atom3710;
atom3734 = atom3261*mx6+mz6*atom3707;
atom3731 = -mz6*atom3710-my6*atom3261;
atom873 = atom80*Iyz5+atom847*Ixy5+atom848*Iyy5;
atom868 = atom848*Ixy5+atom847*Ixx5+Ixz5*atom80;
atom878 = Izz5*atom80+atom848*Iyz5+Ixz5*atom847;
atom3311 = atom848*atom3276+atom3273*atom847+atom3279*atom80;
atom2938 = atom2831^2+atom2832^2;
atom2604 = mx3*atom2590-atom2589*my3;
atom2910 = atom81*atom2879+atom2882*atom80;
atom552 = (atom81*Ixy4+Iyy4*atom80)*atom80+atom81*(atom81*Ixx4+atom80*Ixy4);
atom918 = atom878*atom80+atom848*atom873+atom847*atom868;
atom3765 = -atom848*atom3728+atom3722*atom1444+atom1447*atom3725;
atom1472 = -atom848*Iyz6+atom1444*Ixy6+atom1447*Iyy6;
atom1467 = atom1447*Ixy6-atom848*Ixz6+atom1444*Ixx6;
atom1477 = atom1447*Iyz6+Ixz6*atom1444-atom848*Izz6;
atom1517 = atom1467*atom1444-atom848*atom1477+atom1447*atom1472;
atom3324 = atom3288*atom80+atom848*atom3285+atom3282*atom847;
atom2918 = atom80*atom2891+atom81*atom2888;
atom2941 = d4*atom2831-atom2832*r4;
atom3783 = -atom848*atom3737+atom1444*atom3731+atom1447*atom3734;
atom516 = Iyz4*atom80+atom81*Ixz4;
atom3333 = -atom115*atom868-atom114*atom873;
atom3804 = atom3688*atom1472+atom114*atom1477+atom1467*atom3687;
atom3807 = atom1472*atom152+atom1467*atom153;
atom2944 = d4^2+r4^2;
atom3812 = atom114*Ixz6+atom3687*Ixx6+atom3688*Ixy6;
atom3817 = atom114*Iyz6+atom3688*Iyy6+atom3687*Ixy6;
atom3822 = Ixz6*atom3687+atom3688*Iyz6+atom114*Izz6;
atom3874 = -atom130*atom3273-m4*atom2932-atom1532-atom2599+atom36*Ixz2-atom3298-atom3747-atom95*atom3279+atom58*mz3*atom2589-m5*atom2932-atom58*atom2885-atom2902-atom343-mz3*atom59*atom2590-atom933-atom3725*atom171-atom565-m3*atom2576*d3-m6*atom2932-atom133*atom3276+atom35*Iyz2+atom133*atom3728-atom2882*atom95-atom94*atom2879-atom3722*atom168;
atom3875 = -atom168*atom3731-atom94*atom2888-atom1532-atom95*atom2891-atom3288*atom95-atom2599-m5*atom2935-atom3285*atom133-atom3298-m4*atom2935-atom3747-atom2935*m6-atom58*atom2894-atom2902-atom130*atom3282-atom343-atom933-atom565+atom133*atom3737-atom3734*atom171;
atom3876 = atom114*atom888-atom3687*atom1482-atom3688*atom1487+atom114*atom3267+atom115*atom883-atom114*atom3719-atom2876-atom531+atom115*atom3264-atom3688*atom3716-atom3687*atom3713-atom114*atom1492;
atom3877 = -atom152*atom3716-atom1487*atom152-atom153*atom3713-atom1482*atom153-atom893-atom3270;
atom3878 = -atom1492-atom3719;
atom3880 = -atom918-atom552-m6*atom2941-atom3324-atom2918-m5*atom2941-atom3783-atom2604-atom1517-atom3765-atom2910-m4*atom2941-atom3311-Izz3;
atom3881 = -atom3722*atom3687-atom114*atom3728+atom114*atom3276-atom2885+atom115*atom3273-atom3333-atom516-atom3688*atom3725-atom3804;
atom3882 = -atom878-atom152*atom3725-atom3279-atom3807-atom3722*atom153;
atom3883 = -atom1477-atom3728;
atom3885 = atom115*atom3282-atom114*atom3737-atom3333-atom516+atom114*atom3285-atom3688*atom3734-atom2894-atom3687*atom3731-atom3804;
atom3886 = -atom3288-atom152*atom3734-atom878-atom153*atom3731-atom3807;
atom3887 = -atom1477-atom3737;
atom3889 = -atom3817*atom152+atom114*Iyz5+Ixz5*atom115-atom3812*atom153;
atom3839 = Ixz6*atom153+atom152*Iyz6;

M_ = [-2*atom168*atom3713-atom130*atom883-2*atom58*atom2876+atom133*atom1492-2*atom59*(mz3*atom2588-atom299*my3)-atom36*(atom36*Ixx2+atom35*Ixy2)-2*atom94*atom2870-atom35*(atom35*Iyy2+atom36*Ixy2)-m6*atom2929-atom58*(atom58*Iyy3+atom59*Ixy3)+2*atom133*atom3719-2*atom95*atom2873-m5*atom2929-2*atom133*atom3267-atom59*(atom59*Ixx3+atom58*Ixy3)-Izz1-atom521*atom94-2*atom3716*atom171-atom58*atom531-2*atom95*atom3270-atom1487*atom171-atom95*atom893-atom526*atom95-m4*atom2929-2*atom130*atom3264-atom168*atom1482-m3*(atom299^2+atom2575^2+atom2576^2)-atom133*atom888-2*(mx3*atom299-mz3*atom2585)*atom58 , atom3874 , atom3875 , atom3876 , atom3877 , atom3878;
atom3874 , -m4*atom2938-atom918-atom552-m5*atom2938-m3*d3^2-2*atom2604-atom1517-2*atom3765-m6*atom2938-2*atom2910-Izz2-2*atom3311-Izz3 , atom3880 , atom3881 , atom3882 , atom3883;
atom3875 , atom3880 , -atom918-atom552-2*atom3324-atom2944*m4-2*atom2918-2*atom3783-atom2944*m5-atom1517-atom2944*m6-Izz3 , atom3885 , atom3886 , atom3887;
atom3876 , atom3881 , atom3885 , -Izz4+atom115*(-atom114*Ixy5-atom115*Ixx5)-atom114*atom3822-atom3812*atom3687-atom3817*atom3688+atom114*(-atom115*Ixy5-atom114*Iyy5) , atom3889 , -atom3822;
atom3877 , atom3882 , atom3886 , atom3889 , -Izz5-(atom153*Ixx6+atom152*Ixy6)*atom153-(atom152*Iyy6+atom153*Ixy6)*atom152 , -atom3839;
atom3878 , atom3883 , atom3887 , -atom3822 , -atom3839 , -Izz6];

%endfunction
